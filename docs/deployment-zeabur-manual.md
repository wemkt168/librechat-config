# Zeabur 手动部署 video-proxy 服务 - 详细步骤

## 📋 重要：工作目录设置位置

在 Zeabur 控制台创建服务时，**工作目录设置通常在"高级设置"或"构建配置"中**。

---

## 🚀 完整手动部署步骤

### 步骤 1：进入项目并创建新服务

1. 在 Zeabur 控制台左侧，确认你在 **librechat-config** 项目下
2. 点击 **"+ 建立服務"** 或 **"Add Service"** 按钮
3. 选择 **"從 GitHub 部署"** 或 **"Deploy from GitHub"**

### 步骤 2：选择 GitHub 仓库

1. 搜索或选择仓库：**wemkt168/librechat-config**
2. 选择分支：**main**
3. 点击 **"下一步"** 或 **"Next"**

### 步骤 3：配置服务（⚠️ 关键步骤）

在服务配置页面，你需要找到以下设置：

#### 3.1 基本信息
- **服务名称**：`video-proxy`

#### 3.2 工作目录设置（⚠️ 重要！）

**工作目录设置通常在以下位置之一：**

**位置 A：在"构建配置"或"Build Settings"中**
- 找到 **"构建配置"** 或 **"Build Settings"** 标签
- 找到 **"工作目录"** 或 **"Root Directory"** 或 **"Working Directory"** 字段
- 输入：`video-proxy`

**位置 B：在"高级设置"或"Advanced Settings"中**
- 找到 **"高级设置"** 或 **"Advanced Settings"** 或 **"更多选项"**
- 展开后找到 **"工作目录"** 或 **"Root Directory"**
- 输入：`video-proxy`

**位置 C：在服务配置的主页面**
- 直接在配置页面查找 **"Root Directory"** 或 **"工作目录"** 输入框
- 输入：`video-proxy`

#### 3.3 构建方式
- 选择 **"自动检测"** 或 **"Auto Detect"**
- Zeabur 会自动识别 Node.js（因为 video-proxy/package.json 存在）

#### 3.4 端口设置
- 找到 **"端口"** 或 **"Port"** 设置
- 设置 **容器端口**：`8080`
- 启用 **"暴露端口"** 或 **"Expose Port"**

### 步骤 4：如果找不到工作目录设置

**如果当前页面没有看到工作目录设置：**

1. **继续下一步**，先创建服务
2. 服务创建后，进入服务的 **"設定"** 或 **"Settings"** 标签
3. 在设置页面查找 **"Root Directory"** 或 **"工作目录"**
4. 修改为：`video-proxy`
5. 保存并重新部署

### 步骤 5：部署

1. 检查所有配置：
   - ✅ 服务名称：video-proxy
   - ✅ 工作目录：video-proxy（如果找到了）
   - ✅ 端口：8080
2. 点击 **"部署"** 或 **"Deploy"** 按钮
3. 等待构建完成（通常 2-5 分钟）

### 步骤 6：部署后配置工作目录（如果之前没设置）

如果步骤 3 中没找到工作目录设置，现在设置：

1. 进入 **video-proxy** 服务
2. 点击 **"設定"** 或 **"Settings"** 标签
3. 找到 **"Root Directory"** 或 **"工作目录"**
4. 修改为：`video-proxy`
5. 点击 **"保存"** 或 **"Save"**
6. 点击 **"重新部署"** 或 **"Redeploy"**

### 步骤 7：配置环境变量

1. 进入 **video-proxy** 服务
2. 点击 **"環境變數"** 或 **"Environment Variables"** 标签
3. 添加环境变量：
   - **变量名**：`AI_ML_API_KEY`
   - **变量值**：[从 librechat 项目的 LibreChat UI 服务复制]
4. 点击 **"保存"**
5. 服务会自动重启

---

## 🔍 工作目录设置的位置说明

### 为什么需要设置工作目录？

- Zeabur 默认从仓库根目录查找 `package.json`
- 但我们的代码在 `video-proxy/` 子目录中
- 必须告诉 Zeabur 在 `video-proxy/` 目录下查找 `package.json`

### 如果找不到工作目录设置怎么办？

**方法 1：创建服务后修改**
- 先创建服务（即使工作目录不对）
- 创建后进入服务设置
- 修改工作目录为 `video-proxy`
- 重新部署

**方法 2：检查构建日志**
- 如果构建失败，查看构建日志
- 错误信息通常会提示找不到 `package.json`
- 这时可以确认需要设置工作目录

---

## ✅ 验证部署

部署完成后，检查：

1. **服务状态**：显示 **"運作中"** 或 **"Running"**
2. **构建日志**：没有错误信息
3. **运行时日志**：显示 "Video proxy listening on port 8080"
4. **健康检查**：访问服务域名，应该看到 "Video proxy is running"

---

## 📝 如果遇到问题

### 问题：构建失败，提示找不到 package.json

**原因**：工作目录设置错误或未设置

**解决**：
1. 进入服务设置
2. 找到工作目录设置
3. 修改为：`video-proxy`
4. 重新部署

### 问题：服务启动后立即停止

**原因**：环境变量 `AI_ML_API_KEY` 未配置

**解决**：
1. 进入环境变量设置
2. 添加 `AI_ML_API_KEY`
3. 保存并重启服务

---

**重要提醒**：工作目录设置是关键！如果找不到，先创建服务，然后在服务设置中修改。

---

**最后更新**：2025-12-05 01:08

